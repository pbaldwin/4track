{"ts":1364964115718,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"// usage: log('inside coolFunc', this, arguments);\n// paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/\nwindow.log = function f(){ log.history = log.history || []; log.history.push(arguments); if(this.console) { var args = arguments, newarr; args.callee = args.callee.caller; newarr = [].slice.call(args); if (typeof console.log === 'object') log.apply.call(console.log, console, newarr); else console.log.apply(console, newarr);}};\n\n// make it safe to use console.log always\n(function(a){function b(){}for(var c=\"assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn\".split(\",\"),d;!!(d=c.pop());){a[d]=a[d]||b;}})\n(function(){try{console.log();return window.console;}catch(a){return (window.console={});}}());\n\n\n// place any jQuery/helper plugins in here, instead of separate, slower script files.\n/*\nhtml5slider - a JS implementation of <input type=range> for Firefox 4 and up\nhttps://github.com/fryn/html5slider\n\nCopyright (c) 2010-2011 Frank Yan, <http://frankyan.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n*/\n\n(function() {\n\n// test for native support\nvar test = document.createElement('input');\ntry {\n  test.type = 'range';\n  if (test.type == 'range')\n    return;\n} catch (e) {\n  return;\n}\n\n// test for required property support\nif (!document.mozSetImageElement || !('MozAppearance' in test.style))\n  return;\n\nvar scale;\nvar isMac = navigator.platform == 'MacIntel';\nvar thumb = {\n  radius: isMac ? 9 : 6,\n  width: isMac ? 22 : 12,\n  height: isMac ? 16 : 20\n};\nvar track = '-moz-linear-gradient(top, transparent ' + (isMac ?\n  '6px, #999 6px, #999 7px, #ccc 9px, #bbb 11px, #bbb 12px, transparent 12px' :\n  '9px, #999 9px, #bbb 10px, #fff 11px, transparent 11px') +\n  ', transparent)';\nvar styles = {\n  'min-width': thumb.width + 'px',\n  'min-height': thumb.height + 'px',\n  'max-height': thumb.height + 'px',\n  padding: 0,\n  border: 0,\n  'border-radius': 0,\n  cursor: 'default',\n  'text-indent': '-999999px' // -moz-user-select: none; breaks mouse capture\n};\nvar onChange = document.createEvent('HTMLEvents');\nonChange.initEvent('change', true, false);\n\nif (document.readyState == 'loading')\n  document.addEventListener('DOMContentLoaded', initialize, true);\nelse\n  initialize();\n\nfunction initialize() {\n  // create initial sliders\n  Array.forEach(document.querySelectorAll('input[type=range]'), transform);\n  // create sliders on-the-fly\n  document.addEventListener('DOMNodeInserted', onNodeInserted, true);\n}\n\nfunction onNodeInserted(e) {\n  check(e.target);\n  if (e.target.querySelectorAll)\n    Array.forEach(e.target.querySelectorAll('input'), check);\n}\n\nfunction check(input, async) {\n  if (input.localName != 'input' || input.type == 'range');\n  else if (input.getAttribute('type') == 'range')\n    transform(input);\n  else if (!async)\n    setTimeout(check, 0, input, true);\n}\n\nfunction transform(slider) {\n\n  var isValueSet, areAttrsSet, isChanged, isClick, prevValue, rawValue, prevX;\n  var min, max, step, range, value = slider.value;\n\n  // lazily create shared slider affordance\n  if (!scale) {\n    scale = document.body.appendChild(document.createElement('hr'));\n    style(scale, {\n      '-moz-appearance': isMac ? 'scale-horizontal' : 'scalethumb-horizontal',\n      display: 'block',\n      visibility: 'visible',\n      opacity: 1,\n      position: 'fixed',\n      top: '-999999px'\n    });\n    document.mozSetImageElement('__sliderthumb__', scale);\n  }\n\n  // reimplement value and type properties\n  var getValue = function() { return '' + value; };\n  var setValue = function setValue(val) {\n    value = '' + val;\n    isValueSet = true;\n    draw();\n    delete slider.value;\n    slider.value = value;\n    slider.__defineGetter__('value', getValue);\n    slider.__defineSetter__('value', setValue);\n  };\n  slider.__defineGetter__('value', getValue);\n  slider.__defineSetter__('value', setValue);\n  slider.__defineGetter__('type', function() { return 'range'; });\n\n  // sync properties with attributes\n  ['min', 'max', 'step'].forEach(function(prop) {\n    if (slider.hasAttribute(prop))\n      areAttrsSet = true;\n    slider.__defineGetter__(prop, function() {\n      return this.hasAttribute(prop) ? this.getAttribute(prop) : '';\n    });\n    slider.__defineSetter__(prop, function(val) {\n      val === null ? this.removeAttribute(prop) : this.setAttribute(prop, val);\n    });\n  });\n\n  // initialize slider\n  slider.readOnly = true;\n  style(slider, styles);\n  update();\n\n  slider.addEventListener('DOMAttrModified', function(e) {\n    // note that value attribute only sets initial value\n    if (e.attrName == 'value' && !isValueSet) {\n      value = e.newValue;\n      draw();\n    }\n    else if (~['min', 'max', 'step'].indexOf(e.attrName)) {\n      update();\n      areAttrsSet = true;\n    }\n  }, true);\n\n  slider.addEventListener('mousedown', onDragStart, true);\n  slider.addEventListener('keydown', onKeyDown, true);\n  slider.addEventListener('focus', onFocus, true);\n  slider.addEventListener('blur', onBlur, true);\n\n  function onDragStart(e) {\n    isClick = true;\n    setTimeout(function() { isClick = false; }, 0);\n    if (e.button || !range)\n      return;\n    var width = parseFloat(getComputedStyle(this, 0).width);\n    var multiplier = (width - thumb.width) / range;\n    if (!multiplier)\n      return;\n    // distance between click and center of thumb\n    var dev = e.clientX - this.getBoundingClientRect().left - thumb.width / 2 -\n              (value - min) * multiplier;\n    // if click was not on thumb, move thumb to click location\n    if (Math.abs(dev) > thumb.radius) {\n      isChanged = true;\n      this.value -= -dev / multiplier;\n    }\n    rawValue = value;\n    prevX = e.clientX;\n    this.addEventListener('mousemove', onDrag, true);\n    this.addEventListener('mouseup', onDragEnd, true);\n  }\n\n  function onDrag(e) {\n    var width = parseFloat(getComputedStyle(this, 0).width);\n    var multiplier = (width - thumb.width) / range;\n    if (!multiplier)\n      return;\n    rawValue += (e.clientX - prevX) / multiplier;\n    prevX = e.clientX;\n    isChanged = true;\n    this.value = rawValue;\n  }\n\n  function onDragEnd() {\n    this.removeEventListener('mousemove', onDrag, true);\n    this.removeEventListener('mouseup', onDragEnd, true);\n  }\n\n  function onKeyDown(e) {\n    if (e.keyCode > 36 && e.keyCode < 41) { // 37-40: left, up, right, down\n      onFocus.call(this);\n      isChanged = true;\n      this.value = value + (e.keyCode == 38 || e.keyCode == 39 ? step : -step);\n    }\n  }\n\n  function onFocus() {\n    if (!isClick)\n      this.style.boxShadow = !isMac ? '0 0 0 2px #fb0' :\n        '0 0 2px 1px -moz-mac-focusring, inset 0 0 1px -moz-mac-focusring';\n  }\n\n  function onBlur() {\n    this.style.boxShadow = '';\n  }\n\n  // determines whether value is valid number in attribute form\n  function isAttrNum(value) {\n    return !isNaN(value) && +value == parseFloat(value);\n  }\n\n  // validates min, max, and step attributes and redraws\n  function update() {\n    min = isAttrNum(slider.min) ? +slider.min : 0;\n    max = isAttrNum(slider.max) ? +slider.max : 100;\n    if (max < min)\n      max = min > 100 ? min : 100;\n    step = isAttrNum(slider.step) && slider.step > 0 ? +slider.step : 1;\n    range = max - min;\n    draw(true);\n  }\n\n  // recalculates value property\n  function calc() {\n    if (!isValueSet && !areAttrsSet)\n      value = slider.getAttribute('value');\n    if (!isAttrNum(value))\n      value = (min + max) / 2;;\n    // snap to step intervals (WebKit sometimes does not - bug?)\n    value = Math.round((value - min) / step) * step + min;\n    if (value < min)\n      value = min;\n    else if (value > max)\n      value = min + ~~(range / step) * step;\n  }\n\n  // renders slider using CSS background ;)\n  function draw(attrsModified) {\n    calc();\n    if (isChanged && value != prevValue)\n      slider.dispatchEvent(onChange);\n    isChanged = false;\n    if (!attrsModified && value == prevValue)\n      return;\n    prevValue = value;\n    var position = range ? (value - min) / range * 100 : 0;\n    var bg = '-moz-element(#__sliderthumb__) ' + position + '% no-repeat, ';\n    style(slider, { background: bg + track });\n  }\n\n}\n\nfunction style(element, styles) {\n  for (var prop in styles)\n    element.style.setProperty(prop, styles[prop], 'important');\n}\n\n})();\n\n"]],"start1":0,"start2":0,"length1":0,"length2":9269}]],"length":9269}
